{"ast":null,"code":"var _jsxFileName = \"/Users/Tuan/Desktop/FPT/Mock/Nike-ReactTs-CLient/src/App.tsx\",\n    _s = $RefreshSig$();\n\nimport \"./App.css\";\nimport \"bootstrap-icons/font/bootstrap-icons.css\";\nimport { useEffect, useState, createContext } from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Login from \"./pages/login/Login\";\nimport Register from \"./pages/register/Register\";\nimport Home from \"./pages/Home/Home\";\nimport ProductDetail from \"./pages/ProductDetail\";\nimport NavBar from \"./components/NavBar\";\nimport Products from \"./pages/Products\";\nimport Cart from \"./pages/Cart\";\nimport Footer from \"./components/Footer\";\nimport AppNike from \"./pages/appNike/AppNike\";\nimport { getProducts } from \"./services/apis/functions/productsApi\";\nimport { OrdersHistory } from \"./pages/OrderHistory\";\nimport { Profile } from \"./pages/profile/Profile\";\nimport { SettingUpdate } from \"./pages/settingUpdate/SettingUpdate\";\nimport { authByToken, getCarts } from \"./services/apis\";\nimport { logoutSuccess, useAppDispatch, useAppSelector, userFetchError, userFetchSuccess } from \"./services/store\";\nimport Admin from \"./pages/admin/Admin\";\nimport { Checkout } from \"./components/cart/Checkout\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const ContextElement = /*#__PURE__*/createContext(\"\");\nconst REACT_APP_LIMIT_PER_PAGE = \"10\";\n\nfunction App() {\n  _s();\n\n  const dispatch = useAppDispatch();\n  const {\n    dataUser\n  } = useAppSelector(state => state.authReducer);\n  const [products, setProducts] = useState([]);\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [sortInput, setSortInput] = useState(\"\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalProducts, setTotalProducts] = useState(0);\n  const [pageLimit, setPageLimit] = useState(REACT_APP_LIMIT_PER_PAGE);\n  const [loading, setLoading] = useState(false);\n  const [category, setCategory] = useState(\"\");\n  const [itemsInCart, setItemsInCart] = useState([]);\n  useEffect(() => {\n    if (dataUser) {\n      if (localStorage.getItem(\"token\")) {\n        getCarts(dataUser.id).then(res => setItemsInCart(res.data)).catch(err => {\n          var _err$response;\n\n          if ((err === null || err === void 0 ? void 0 : (_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401) {\n            if (localStorage.getItem(\"token\")) {\n              localStorage.removeItem(\"token\");\n            }\n          }\n        });\n      }\n    }\n  });\n  const [addItemToCartMessage, setAddItemToCartMessage] = useState(false);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [toDashboard, setToDashBoard] = useState(false);\n  const [gender, setGender] = useState(\"\");\n  useEffect(() => {\n    if (localStorage.getItem(\"token\")) {\n      authByToken().then(res => {\n        dispatch(userFetchSuccess(res.data));\n        setTimeout(function () {\n          dispatch(logoutSuccess());\n        }, new Date(res.data.expired).getTime() - new Date().getTime());\n      }).catch(err => {\n        if (localStorage.getItem(\"token\")) {\n          localStorage.removeItem(\"token\");\n        }\n\n        dispatch(userFetchError(err.response.data.message));\n      });\n    }\n  }, []);\n  useEffect(() => {\n    let sortUrl = sortInput !== \"\" ? `/sort/price/${sortInput}` : \"\";\n    let paginationUrl = \"/page/\" + (currentPage - 1) * Number(pageLimit) + \"/\" + pageLimit;\n    let searchUrl = searchInput !== \"\" ? \"/search/\" + searchInput : \"\";\n    let categoryUrl = category !== \"\" && category !== \"All\" ? `/type/${category}` : \"\";\n    const path = categoryUrl + searchUrl + sortUrl + paginationUrl;\n\n    if (sortInput !== null || searchInput !== null || category !== null) {\n      getProducts(path).then(response => {\n        setLoading(true);\n        setTotalProducts(Number(response.data.totalRecords));\n        return response.data;\n      }).then(data => {\n        setLoading(false);\n        setProducts(data.results);\n      }).catch(error => {\n        var _error$response, _error$response$data;\n\n        return console.log((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message);\n      });\n    }\n  }, [sortInput, currentPage, searchInput, pageLimit, category, gender]);\n  useEffect(() => {\n    if (dataUser) {\n      if (dataUser.rules.includes(\"admin\")) {\n        setIsAdmin(true);\n      } else {\n        setIsAdmin(false);\n      }\n    }\n  }, [dataUser]);\n  useEffect(() => {\n    let productsClone = [...products];\n    productsClone = productsClone.filter(product => {\n      return product.gender === gender;\n    }); // eslint-disable-next-line\n\n    setProducts(productsClone); // eslint-disable-next-line\n  }, [gender]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(ContextElement.Provider, {\n      value: {\n        itemsInCart,\n        setItemsInCart,\n        addItemToCartMessage,\n        setAddItemToCartMessage,\n        setToDashBoard\n      },\n      children: /*#__PURE__*/_jsxDEV(Router, {\n        children: [!toDashboard ? /*#__PURE__*/_jsxDEV(NavBar, {\n          isAdmin: isAdmin,\n          setToDashBoard: setToDashBoard,\n          gender: gender,\n          setGender: setGender\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 13\n        }, this) : null, /*#__PURE__*/_jsxDEV(Switch, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/login\",\n            children: /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 44\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/register\",\n            children: /*#__PURE__*/_jsxDEV(Register, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 47\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            exact: true,\n            path: \"/cart\",\n            children: /*#__PURE__*/_jsxDEV(Cart, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 156,\n              columnNumber: 49\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/cart/checkout\",\n            children: /*#__PURE__*/_jsxDEV(Checkout, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 52\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/ordershistory\",\n            children: /*#__PURE__*/_jsxDEV(OrdersHistory, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 52\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/profile\",\n            children: /*#__PURE__*/_jsxDEV(Profile, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 46\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/update\",\n            children: /*#__PURE__*/_jsxDEV(SettingUpdate, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/app\",\n            children: /*#__PURE__*/_jsxDEV(AppNike, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 163,\n              columnNumber: 42\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/products/:id\",\n            children: /*#__PURE__*/_jsxDEV(ProductDetail, {\n              products: products,\n              loading: loading\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 167,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/products\",\n            children: /*#__PURE__*/_jsxDEV(Products, {\n              setSortInput: setSortInput,\n              products: products,\n              totalProducts: totalProducts,\n              currentPage: currentPage,\n              setCurrentPage: setCurrentPage,\n              pageLimit: pageLimit,\n              setPageLimit: setPageLimit,\n              loading: loading,\n              setSearchInput: setSearchInput,\n              setCategory: setCategory,\n              category: category,\n              gender: gender\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/admin\",\n            children: /*#__PURE__*/_jsxDEV(Admin, {\n              setToDashBoard: setToDashBoard\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/\",\n            children: /*#__PURE__*/_jsxDEV(Home, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 39\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this), !toDashboard ? /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 23\n    }, this) : null]\n  }, void 0, true);\n}\n\n_s(App, \"5VBgFjEXLbVwzf6M5p+Dk3Z3B7U=\", false, function () {\n  return [useAppDispatch, useAppSelector];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/Tuan/Desktop/FPT/Mock/Nike-ReactTs-CLient/src/App.tsx"],"names":["useEffect","useState","createContext","BrowserRouter","Router","Switch","Route","Login","Register","Home","ProductDetail","NavBar","Products","Cart","Footer","AppNike","getProducts","OrdersHistory","Profile","SettingUpdate","authByToken","getCarts","logoutSuccess","useAppDispatch","useAppSelector","userFetchError","userFetchSuccess","Admin","Checkout","ContextElement","REACT_APP_LIMIT_PER_PAGE","App","dispatch","dataUser","state","authReducer","products","setProducts","searchInput","setSearchInput","sortInput","setSortInput","currentPage","setCurrentPage","totalProducts","setTotalProducts","pageLimit","setPageLimit","loading","setLoading","category","setCategory","itemsInCart","setItemsInCart","localStorage","getItem","id","then","res","data","catch","err","response","status","removeItem","addItemToCartMessage","setAddItemToCartMessage","isAdmin","setIsAdmin","toDashboard","setToDashBoard","gender","setGender","setTimeout","Date","expired","getTime","message","sortUrl","paginationUrl","Number","searchUrl","categoryUrl","path","totalRecords","results","error","console","log","rules","includes","productsClone","filter","product"],"mappings":"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","sourcesContent":["import \"./App.css\";\nimport \"bootstrap-icons/font/bootstrap-icons.css\";\nimport { useEffect, useState, createContext } from \"react\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport Login from \"./pages/login/Login\";\nimport Register from \"./pages/register/Register\";\nimport Home from \"./pages/Home/Home\";\nimport ProductDetail from \"./pages/ProductDetail\";\nimport NavBar from \"./components/NavBar\";\nimport Products from \"./pages/Products\";\nimport Cart from \"./pages/Cart\";\nimport Footer from \"./components/Footer\";\nimport AppNike from \"./pages/appNike/AppNike\";\nimport { getProducts } from \"./services/apis/functions/productsApi\";\nimport { OrdersHistory } from \"./pages/OrderHistory\";\nimport { Profile } from \"./pages/profile/Profile\";\nimport { SettingUpdate } from \"./pages/settingUpdate/SettingUpdate\";\nimport { authByToken, getCarts } from \"./services/apis\";\nimport {\n  logoutSuccess,\n  useAppDispatch,\n  useAppSelector,\n  userFetchError,\n  userFetchSuccess,\n} from \"./services/store\";\nimport Admin from \"./pages/admin/Admin\";\nimport { Checkout } from \"./components/cart/Checkout\";\n\nexport const ContextElement = createContext(\"\") as any;\n\nconst REACT_APP_LIMIT_PER_PAGE = \"10\";\n\nfunction App() {\n  const dispatch = useAppDispatch();\n  const { dataUser } = useAppSelector((state) => state.authReducer);\n  const [products, setProducts] = useState([]);\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [sortInput, setSortInput] = useState(\"\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [totalProducts, setTotalProducts] = useState(0);\n  const [pageLimit, setPageLimit] = useState(REACT_APP_LIMIT_PER_PAGE);\n  const [loading, setLoading] = useState(false);\n  const [category, setCategory] = useState(\"\");\n\n  const [itemsInCart, setItemsInCart] = useState([] as CartItem[]);\n  useEffect(() => {\n    if (dataUser) {\n      if (localStorage.getItem(\"token\")) {\n        getCarts(dataUser.id)\n          .then((res) => setItemsInCart(res.data))\n          .catch((err) => {\n            if (err?.response?.status === 401) {\n              if (localStorage.getItem(\"token\")) {\n                localStorage.removeItem(\"token\");\n              }\n            }\n          });\n      }\n    }\n  });\n\n  const [addItemToCartMessage, setAddItemToCartMessage] = useState(false);\n\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [toDashboard, setToDashBoard] = useState(false);\n\n  const [gender, setGender] = useState(\"\");\n\n  useEffect(() => {\n    if (localStorage.getItem(\"token\")) {\n      authByToken()\n        .then((res) => {\n          dispatch(userFetchSuccess(res.data));\n          setTimeout(function () {\n            dispatch(logoutSuccess())\n          },new Date(res.data.expired).getTime() - new Date().getTime())\n        })\n        .catch((err) => {\n          if (localStorage.getItem(\"token\")) {\n            localStorage.removeItem(\"token\");\n          }\n          dispatch(userFetchError(err.response.data.message));\n        });\n    }\n  }, []);\n\n  useEffect(() => {\n    let sortUrl = sortInput !== \"\" ? `/sort/price/${sortInput}` : \"\";\n    let paginationUrl =\n      \"/page/\" + (currentPage - 1) * Number(pageLimit) + \"/\" + pageLimit;\n    let searchUrl = searchInput !== \"\" ? \"/search/\" + searchInput : \"\";\n    let categoryUrl =\n      category !== \"\" && category !== \"All\" ? `/type/${category}` : \"\";\n    const path = categoryUrl + searchUrl + sortUrl + paginationUrl;\n\n    if (sortInput !== null || searchInput !== null || category !== null) {\n      getProducts(path)\n        .then((response) => {\n          setLoading(true);\n          setTotalProducts(Number(response.data.totalRecords));\n          return response.data;\n        })\n        .then((data) => {\n          setLoading(false);\n          setProducts(data.results);\n        })\n        .catch((error) => console.log(error.response?.data?.message));\n    }\n  }, [sortInput, currentPage, searchInput, pageLimit, category, gender]);\n\n  useEffect(() => {\n    if (dataUser) {\n      if (dataUser.rules.includes(\"admin\")) {\n        setIsAdmin(true);\n      } else {\n        setIsAdmin(false);\n      }\n    }\n  }, [dataUser]);\n\n  useEffect(() => {\n    let productsClone = [...products];\n    productsClone = productsClone.filter((product: Product) => {\n      return product.gender === gender;\n    });\n    // eslint-disable-next-line\n    setProducts(productsClone);\n    // eslint-disable-next-line\n  }, [gender]);\n\n  return (\n    <>\n      <ContextElement.Provider\n        value={{\n          itemsInCart,\n          setItemsInCart,\n          addItemToCartMessage,\n          setAddItemToCartMessage,\n          setToDashBoard,\n        }}\n      >\n        <Router>\n          {!toDashboard ? (\n            <NavBar\n              isAdmin={isAdmin}\n              setToDashBoard={setToDashBoard}\n              gender={gender}\n              setGender={setGender}\n            />\n          ) : null}\n\n          <Switch>\n            <Route path=\"/login\" children={<Login />} />\n            <Route path=\"/register\" children={<Register />} />\n\n            <Route exact path=\"/cart\" children={<Cart />} />\n            <Route path=\"/cart/checkout\" children={<Checkout />} />\n\n            <Route path=\"/ordershistory\" children={<OrdersHistory />} />\n            <Route path=\"/profile\" children={<Profile />} />\n            <Route path=\"/update\" children={<SettingUpdate />} />\n\n            <Route path=\"/app\" children={<AppNike />} />\n\n            <Route\n              path=\"/products/:id\"\n              children={<ProductDetail products={products} loading={loading} />}\n            />\n\n            <Route\n              path=\"/products\"\n              children={\n                <Products\n                  setSortInput={setSortInput}\n                  products={products}\n                  totalProducts={totalProducts}\n                  currentPage={currentPage}\n                  setCurrentPage={setCurrentPage}\n                  pageLimit={pageLimit}\n                  setPageLimit={setPageLimit}\n                  loading={loading}\n                  setSearchInput={setSearchInput}\n                  setCategory={setCategory}\n                  category={category}\n                  gender={gender}\n                />\n              }\n            />\n\n            <Route\n              path=\"/admin\"\n              children={<Admin setToDashBoard={setToDashBoard} />}\n            />\n            <Route path=\"/\" children={<Home />} />\n          </Switch>\n        </Router>\n      </ContextElement.Provider>\n\n      {!toDashboard ? <Footer /> : null}\n    </>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}