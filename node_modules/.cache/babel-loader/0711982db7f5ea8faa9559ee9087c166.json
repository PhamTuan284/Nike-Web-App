{"ast":null,"code":"var _jsxFileName = \"/Users/Tuan/Desktop/FPT/Mock/Nike-ReactTs-CLient/src/pages/admin/Admin.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport Dashboard from \"../../components/admin/Dashboard\";\nimport Navbar from \"../../components/admin/Navbar\";\nimport ProductAddForm from \"../../components/admin/ProductAddForm\";\nimport ProductEditForm from \"../../components/admin/ProductEditForm\";\nimport { UserEditForm } from \"../../components/admin/UserEditForm\";\nimport { UserAddForm } from \"../../components/admin/UserAddForm\";\nimport { UserRoles } from \"../../components/admin/UserRoles\";\nimport { AccountSetting } from \"../../components/admin/AcountSetting\";\nimport { useAppSelector } from \"../../services/store\";\nimport AuthenticatedGuard from \"../../components/auth/authentication/authenticatedGuard/AuthenticatedGuard\";\nimport { getProducts, getUsersBySearchPage } from \"../../services/apis\";\nimport { useLocation } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst rules = [\"admin\", \"product_admin\", \"user_admin\"];\n\nconst Admin = _ref => {\n  _s();\n\n  let {\n    setToDashBoard\n  } = _ref;\n  const location = useLocation();\n  const {\n    dataUser\n  } = useAppSelector(state => state.authReducer);\n  const [usersList, setUsersList] = useState([]);\n  const [productsList, setProductsList] = useState([]);\n  const [manageType, setManageType] = useState(\"\");\n  const [currentPageAdmin, setCurrentPageAdmin] = useState(1);\n  const [totalItemAdmin, setTotalItemAdmin] = useState(0);\n  const [searchInputAdmin, setSearchInputAdmin] = useState(\"\");\n  const LIMIT_ITEM = 10;\n  let totalPage = Math.ceil(totalItemAdmin / 10);\n  let totalPageArr = [];\n\n  for (let i = 0; i < totalPage; i++) {\n    totalPageArr.push(i + 1);\n  }\n\n  useEffect(() => {\n    if (dataUser !== null && dataUser !== void 0 && dataUser.rules.includes(\"admin\") || dataUser !== null && dataUser !== void 0 && dataUser.rules.includes(\"user_admin\")) {\n      setManageType(\"user\");\n    } else if (dataUser !== null && dataUser !== void 0 && dataUser.rules.includes(\"product_admin\")) {\n      setManageType(\"product\");\n    }\n  }, [dataUser]);\n  useEffect(() => {\n    if (manageType === \"user\") {\n      setTotalItemAdmin(usersList.length);\n      let paginationUrl = \"/page/0/\" + LIMIT_ITEM;\n      getUsersBySearchPage(paginationUrl).then(res => {\n        setUsersList(res.data.results);\n        setTotalItemAdmin(res.data.totalRecords);\n      }).catch(err => console.log(err.response.data.message));\n    } else if (manageType === \"product\") {\n      setTotalItemAdmin(productsList.length);\n      let paginationUrl = \"/page/0/\" + LIMIT_ITEM;\n      getProducts(paginationUrl).then(res => {\n        setProductsList(res.data.results);\n        setTotalItemAdmin(res.data.totalRecords);\n      }).catch(err => console.log(err.response.data.message));\n    }\n  }, [manageType, location.pathname]);\n  useEffect(() => {\n    if (manageType === \"product\") {\n      let paginationUrl = \"/page/\" + (currentPageAdmin - 1) * Number(LIMIT_ITEM) + \"/\" + LIMIT_ITEM;\n      let searchUrl = searchInputAdmin !== \"\" ? \"/search/\" + searchInputAdmin : \"\";\n      const path = searchUrl + paginationUrl;\n      getProducts(path).then(res => {\n        setProductsList(res.data.results);\n        setTotalItemAdmin(res.data.totalRecords);\n      }).catch(err => console.log(err.response.data.message));\n    } else if (manageType === \"user\") {\n      //Duc code here\n      let paginationUrl = \"/page/\" + (currentPageAdmin - 1) * Number(LIMIT_ITEM) + \"/\" + LIMIT_ITEM;\n      let searchUrl = searchInputAdmin !== \"\" ? \"/search/\" + searchInputAdmin : \"\";\n      const path = searchUrl + paginationUrl;\n      getUsersBySearchPage(path).then(res => {\n        setUsersList(res.data.results);\n        setTotalItemAdmin(res.data.totalRecords);\n      }).catch(err => console.log(err.response.data.message));\n    }\n  }, [currentPageAdmin, searchInputAdmin, manageType]);\n  useEffect(() => {\n    setToDashBoard(true);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(AuthenticatedGuard, {\n    routeRules: rules,\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {\n      manageType: manageType,\n      setManageType: setManageType,\n      setToDashBoard: setToDashBoard\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-center mb-4\",\n      children: \"Admin Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Switch, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/admin/addproduct\",\n        children: /*#__PURE__*/_jsxDEV(ProductAddForm, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 57\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/admin/editproduct/:id\",\n        children: /*#__PURE__*/_jsxDEV(ProductEditForm, {\n          productsList: productsList,\n          setProductsList: setProductsList\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/admin/adduser\",\n        children: /*#__PURE__*/_jsxDEV(UserAddForm, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 54\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/admin/setting/profile/:id\",\n        children: /*#__PURE__*/_jsxDEV(UserEditForm, {\n          usersList: usersList\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/admin/setting/roles/:id\",\n        children: /*#__PURE__*/_jsxDEV(UserRoles, {\n          usersList: usersList\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/admin/setting/account/:id\",\n        children: /*#__PURE__*/_jsxDEV(AccountSetting, {\n          usersList: usersList\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/admin\",\n        children: /*#__PURE__*/_jsxDEV(Dashboard, {\n          setUsersList: setUsersList,\n          setSearchInputAdmin: setSearchInputAdmin,\n          manageType: manageType,\n          usersList: usersList,\n          productsList: productsList,\n          setProductsList: setProductsList,\n          currentPageAdmin: currentPageAdmin,\n          setCurrentPageAdmin: setCurrentPageAdmin,\n          totalPage: totalPage,\n          totalPageArr: totalPageArr\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Admin, \"KCkJd3LRqtwRJes0QVqexayHOlU=\", false, function () {\n  return [useLocation, useAppSelector];\n});\n\n_c = Admin;\nexport default Admin;\n\nvar _c;\n\n$RefreshReg$(_c, \"Admin\");","map":{"version":3,"sources":["/Users/Tuan/Desktop/FPT/Mock/Nike-ReactTs-CLient/src/pages/admin/Admin.tsx"],"names":["React","useEffect","useState","Route","Switch","Dashboard","Navbar","ProductAddForm","ProductEditForm","UserEditForm","UserAddForm","UserRoles","AccountSetting","useAppSelector","AuthenticatedGuard","getProducts","getUsersBySearchPage","useLocation","rules","Admin","setToDashBoard","location","dataUser","state","authReducer","usersList","setUsersList","productsList","setProductsList","manageType","setManageType","currentPageAdmin","setCurrentPageAdmin","totalItemAdmin","setTotalItemAdmin","searchInputAdmin","setSearchInputAdmin","LIMIT_ITEM","totalPage","Math","ceil","totalPageArr","i","push","includes","length","paginationUrl","then","res","data","results","totalRecords","catch","err","console","log","response","message","pathname","Number","searchUrl","path"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport Dashboard from \"../../components/admin/Dashboard\";\nimport Navbar from \"../../components/admin/Navbar\";\nimport ProductAddForm from \"../../components/admin/ProductAddForm\";\nimport ProductEditForm from \"../../components/admin/ProductEditForm\";\nimport { UserEditForm } from \"../../components/admin/UserEditForm\";\nimport { UserAddForm } from \"../../components/admin/UserAddForm\";\nimport { UserRoles } from \"../../components/admin/UserRoles\";\nimport { AccountSetting } from \"../../components/admin/AcountSetting\";\nimport { useAppSelector } from \"../../services/store\";\nimport AuthenticatedGuard from \"../../components/auth/authentication/authenticatedGuard/AuthenticatedGuard\";\nimport { getProducts, getUsersBySearchPage } from \"../../services/apis\";\nimport { useLocation } from \"react-router-dom\";\n\nconst rules = [\"admin\", \"product_admin\", \"user_admin\"];\n\ninterface Props {\n  setToDashBoard: (value: boolean) => void;\n}\n\ninterface LocationState {\n  from: {\n    pathname: string;\n  };\n}\n\nconst Admin: React.FC<Props> = ({ setToDashBoard }) => {\n  const location = useLocation<LocationState>();\n\n  const { dataUser } = useAppSelector((state) => state.authReducer);\n\n  const [usersList, setUsersList] = useState<Array<User>>([]);\n  const [productsList, setProductsList] = useState<Array<Product>>([]);\n  const [manageType, setManageType] = useState(\"\");\n  const [currentPageAdmin, setCurrentPageAdmin] = useState(1);\n  const [totalItemAdmin, setTotalItemAdmin] = useState(0);\n  const [searchInputAdmin, setSearchInputAdmin] = useState(\"\");\n\n  const LIMIT_ITEM = 10;\n\n  let totalPage = Math.ceil(totalItemAdmin / 10);\n  let totalPageArr = [];\n  for (let i = 0; i < totalPage; i++) {\n    totalPageArr.push(i + 1);\n  }\n\n  useEffect(() => {\n    if (\n      dataUser?.rules.includes(\"admin\") ||\n      dataUser?.rules.includes(\"user_admin\")\n    ) {\n      setManageType(\"user\");\n    } else if (dataUser?.rules.includes(\"product_admin\")) {\n      setManageType(\"product\");\n    }\n  }, [dataUser]);\n  useEffect(() => {\n    if (manageType === \"user\") {\n      setTotalItemAdmin(usersList.length);\n      let paginationUrl = \"/page/0/\" + LIMIT_ITEM;\n      getUsersBySearchPage(paginationUrl)\n        .then((res) => {\n          setUsersList(res.data.results);\n          setTotalItemAdmin(res.data.totalRecords);\n        })\n        .catch((err) => console.log(err.response.data.message));\n    } else if (manageType === \"product\") {\n      setTotalItemAdmin(productsList.length);\n      let paginationUrl = \"/page/0/\" + LIMIT_ITEM;\n      getProducts(paginationUrl)\n        .then((res) => {\n          setProductsList(res.data.results);\n          setTotalItemAdmin(res.data.totalRecords);\n        })\n        .catch((err) => console.log(err.response.data.message));\n    }\n  }, [manageType, location.pathname]);\n\n  useEffect(() => {\n    if (manageType === \"product\") {\n      let paginationUrl =\n        \"/page/\" +\n        (currentPageAdmin - 1) * Number(LIMIT_ITEM) +\n        \"/\" +\n        LIMIT_ITEM;\n\n      let searchUrl =\n        searchInputAdmin !== \"\" ? \"/search/\" + searchInputAdmin : \"\";\n\n      const path = searchUrl + paginationUrl;\n\n      getProducts(path)\n        .then((res) => {\n          setProductsList(res.data.results);\n          setTotalItemAdmin(res.data.totalRecords);\n        })\n        .catch((err) => console.log(err.response.data.message));\n    } else if (manageType === \"user\") {\n      //Duc code here\n      let paginationUrl =\n        \"/page/\" +\n        (currentPageAdmin - 1) * Number(LIMIT_ITEM) +\n        \"/\" +\n        LIMIT_ITEM;\n\n      let searchUrl =\n        searchInputAdmin !== \"\" ? \"/search/\" + searchInputAdmin : \"\";\n\n      const path = searchUrl + paginationUrl;\n\n      getUsersBySearchPage(path)\n        .then((res) => {\n          setUsersList(res.data.results);\n          setTotalItemAdmin(res.data.totalRecords);\n        })\n        .catch((err) => console.log(err.response.data.message));\n    }\n  }, [currentPageAdmin, searchInputAdmin, manageType]);\n\n  useEffect(() => {\n    setToDashBoard(true);\n  }, []);\n\n  return (\n    <AuthenticatedGuard routeRules={rules}>\n      <Navbar\n        manageType={manageType}\n        setManageType={setManageType}\n        setToDashBoard={setToDashBoard}\n      />\n\n      <h1 className=\"text-center mb-4\">Admin Dashboard</h1>\n\n      <Switch>\n        <Route exact path=\"/admin/addproduct\" children={<ProductAddForm />} />\n        <Route\n          exact\n          path=\"/admin/editproduct/:id\"\n          children={\n            <ProductEditForm\n              productsList={productsList}\n              setProductsList={setProductsList}\n            />\n          }\n        />\n        <Route exact path=\"/admin/adduser\" children={<UserAddForm />} />\n        <Route\n          exact\n          path=\"/admin/setting/profile/:id\"\n          children={<UserEditForm usersList={usersList} />}\n        />\n        <Route\n          exact\n          path=\"/admin/setting/roles/:id\"\n          children={<UserRoles usersList={usersList} />}\n        />\n        <Route\n          exact\n          path=\"/admin/setting/account/:id\"\n          children={<AccountSetting usersList={usersList} />}\n        />\n        <Route\n          exact\n          path=\"/admin\"\n          children={\n            <Dashboard\n              setUsersList={setUsersList}\n              setSearchInputAdmin={setSearchInputAdmin}\n              manageType={manageType}\n              usersList={usersList}\n              productsList={productsList}\n              setProductsList={setProductsList}\n              currentPageAdmin={currentPageAdmin}\n              setCurrentPageAdmin={setCurrentPageAdmin}\n              totalPage={totalPage}\n              totalPageArr={totalPageArr}\n            />\n          }\n        />\n      </Switch>\n    </AuthenticatedGuard>\n  );\n};\n\nexport default Admin;\n"]},"metadata":{},"sourceType":"module"}