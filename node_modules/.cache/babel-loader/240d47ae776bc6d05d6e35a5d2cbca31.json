{"ast":null,"code":"var _jsxFileName = \"/Users/Tuan/Desktop/FPT/Mock/Nike-ReactTs-CLient/src/pages/settingUpdate/SettingUpdate.tsx\",\n    _s = $RefreshSig$();\n\nimport { ErrorMessage, Field, Form, Formik } from \"formik\";\nimport { useDispatch } from \"react-redux\";\nimport { NavBarProfile } from \"../../components/NavBarProfile\";\nimport { updateInfo, authByToken } from \"../../services/apis\";\nimport { UpdateMessage } from './UpdateMessage';\nimport { useAppSelector, userSettingsStatus, userFetchSuccess, userFetchError } from \"../../services/store\";\nimport * as Yup from \"yup\";\nimport AuthenticatedGuard from \"../../components/auth/authentication/authenticatedGuard/AuthenticatedGuard\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { ContextElement } from \"../../App\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet rules = [\"user\"];\nexport const SettingUpdate = () => {\n  _s();\n\n  const {\n    dataUser\n  } = useAppSelector(state => state.authReducer);\n  const [updateMessage, setUpdateMessage] = useState(false);\n  const dispatch = useDispatch();\n  let {\n    setToDashBoard\n  } = useContext(ContextElement);\n  useEffect(() => {\n    setToDashBoard(false);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(AuthenticatedGuard, {\n    routeRules: rules,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container my-3\",\n      children: [/*#__PURE__*/_jsxDEV(NavBarProfile, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-8 mx-auto\",\n        children: dataUser ? /*#__PURE__*/_jsxDEV(Formik, {\n          initialValues: {\n            email: dataUser.email,\n            newEmail: dataUser.email,\n            password: \"\",\n            address: dataUser.address.address,\n            city: dataUser.address.city,\n            phone: dataUser.phoneNumber,\n            avatar: dataUser.avatar\n          },\n          validationSchema: Yup.object().shape({\n            address: Yup.string().required(\"* Required!\"),\n            city: Yup.string().required(\"* Required!\"),\n            phone: Yup.string().required(\"* Required!\")\n          }),\n          onSubmit: values => {\n            const dataBody = {\n              id: dataUser === null || dataUser === void 0 ? void 0 : dataUser.id,\n              email: dataUser === null || dataUser === void 0 ? void 0 : dataUser.email,\n              address: {\n                address: values.address,\n                city: values.city\n              },\n              password: dataUser === null || dataUser === void 0 ? void 0 : dataUser.password,\n              phoneNumber: values.phone,\n              avatar: values.avatar\n            };\n            updateInfo(dataUser.id, dataBody).then(res => {\n              dispatch(userSettingsStatus({\n                nameInput: \"\",\n                message: \"\"\n              }));\n\n              if (localStorage.getItem(\"token\")) {\n                authByToken().then(res => {\n                  dispatch(userFetchSuccess(res.data));\n                }).then(() => {\n                  setUpdateMessage(true);\n                }).catch(err => dispatch(userFetchError(err.response.data.message)));\n              }\n            }).catch(error => {\n              alert(error.response.data.message);\n            });\n          },\n          children: props => /*#__PURE__*/_jsxDEV(Form, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-sm-6\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"email\",\n                    children: \"Email:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 91,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(Field, {\n                    value: dataUser.email,\n                    disabled: true,\n                    id: \"email\",\n                    name: \"email\",\n                    type: \"email\",\n                    className: \"form-control my-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 92,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n                    name: \"email\",\n                    component: \"div\",\n                    className: \"text-danger\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 100,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"address\",\n                      children: \"Address: \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 106,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(Field, {\n                      id: \"address\",\n                      name: \"address\",\n                      className: \"form-control my-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 107,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n                      name: \"address\",\n                      component: \"div\",\n                      className: \"text-danger\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 112,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 105,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-sm-6\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"city\",\n                      children: \"City: \"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 121,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(Field, {\n                      id: \"city\",\n                      name: \"city\",\n                      className: \"form-control my-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 122,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n                      name: \"city\",\n                      component: \"div\",\n                      className: \"text-danger\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 127,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 120,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group\",\n                    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                      htmlFor: \"phone\",\n                      children: \"Phone:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 135,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(Field, {\n                      id: \"phone\",\n                      name: \"phone\",\n                      className: \"form-control my-2\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 136,\n                      columnNumber: 27\n                    }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n                      name: \"phone\",\n                      component: \"div\",\n                      className: \"text-danger\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 141,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 134,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 119,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"avatar\",\n                children: \"Avatar: \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Field, {\n                id: \"avatar\",\n                name: \"avatar\",\n                className: \"form-control my-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n                name: \"avatar\",\n                component: \"div\",\n                className: \"text-danger\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                style: {\n                  width: \"14rem\",\n                  padding: \"1rem\"\n                },\n                src: props.values.avatar,\n                alt: \"\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-dark w-100 mt-2\",\n              type: \"submit\",\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 13\n        }, this) : \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(UpdateMessage, {\n        updateMessage: updateMessage,\n        setUpdateMessage: setUpdateMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SettingUpdate, \"eha7fnqn50iE9Zx3Zmf7Nzi9J4s=\", false, function () {\n  return [useAppSelector, useDispatch];\n});\n\n_c = SettingUpdate;\n\nvar _c;\n\n$RefreshReg$(_c, \"SettingUpdate\");","map":{"version":3,"sources":["/Users/Tuan/Desktop/FPT/Mock/Nike-ReactTs-CLient/src/pages/settingUpdate/SettingUpdate.tsx"],"names":["ErrorMessage","Field","Form","Formik","useDispatch","NavBarProfile","updateInfo","authByToken","UpdateMessage","useAppSelector","userSettingsStatus","userFetchSuccess","userFetchError","Yup","AuthenticatedGuard","useContext","useEffect","useState","ContextElement","rules","SettingUpdate","dataUser","state","authReducer","updateMessage","setUpdateMessage","dispatch","setToDashBoard","email","newEmail","password","address","city","phone","phoneNumber","avatar","object","shape","string","required","values","dataBody","id","then","res","nameInput","message","localStorage","getItem","data","catch","err","response","error","alert","props","width","padding"],"mappings":"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","sourcesContent":["import { ErrorMessage, Field, Form, Formik } from \"formik\";\nimport { useDispatch } from \"react-redux\";\nimport { NavBarProfile } from \"../../components/NavBarProfile\";\nimport { updateInfo, authByToken } from \"../../services/apis\";\nimport {UpdateMessage} from './UpdateMessage'\nimport {\n  useAppSelector,\n  userSettingsStatus,\n  userFetchSuccess,\n  userFetchError,\n} from \"../../services/store\";\nimport * as Yup from \"yup\";\nimport AuthenticatedGuard from \"../../components/auth/authentication/authenticatedGuard/AuthenticatedGuard\";\nimport { useContext, useEffect, useState } from \"react\";\nimport { ContextElement } from \"../../App\";\nlet rules = [\"user\"];\n\nexport const SettingUpdate = () => {\n  const { dataUser } = useAppSelector((state) => state.authReducer);\n  const [updateMessage, setUpdateMessage] = useState(false);\n\n  const dispatch = useDispatch();\n\n  let { setToDashBoard } = useContext(ContextElement);\n\n  useEffect(() => {\n    setToDashBoard(false);\n  }, []);\n\n  return (\n    <AuthenticatedGuard routeRules={rules}>\n      <div className=\"container my-3\">\n        <NavBarProfile />\n        <div className=\"col-8 mx-auto\">\n          {dataUser ? (\n            <Formik\n              initialValues={{\n                email: dataUser.email,\n                newEmail: dataUser.email,\n                password: \"\",\n                address: dataUser.address.address,\n                city: dataUser.address.city,\n                phone: dataUser.phoneNumber,\n                avatar: dataUser.avatar,\n              }}\n              validationSchema={Yup.object().shape({\n                address: Yup.string().required(\"* Required!\"),\n                city: Yup.string().required(\"* Required!\"),\n                phone: Yup.string().required(\"* Required!\"),\n              })}\n              onSubmit={(values) => {\n                const dataBody = {\n                  id: dataUser?.id,\n                  email: dataUser?.email,\n                  address: { address: values.address, city: values.city },\n                  password: dataUser?.password,\n                  phoneNumber: values.phone,\n                  avatar: values.avatar,\n                };\n                updateInfo(dataUser.id, dataBody)\n                  .then((res) => {\n                    dispatch(\n                      userSettingsStatus({\n                        nameInput: \"\",\n                        message: \"\",\n                      })\n                    );\n                    if (localStorage.getItem(\"token\")) {\n                      authByToken()\n                        .then((res) => {\n                          dispatch(userFetchSuccess(res.data));\n                        })\n                        .then(() => {\n                          setUpdateMessage(true);\n                        })\n                        .catch((err) =>\n                          dispatch(userFetchError(err.response.data.message))\n                        );\n                    }\n                  })\n                  .catch((error) => {\n                    alert(error.response.data.message);\n                  });\n              }}\n            >\n              {(props) => (\n                <Form>\n                  <div className=\"form-group\">\n                    <div className=\"row\">\n                      <div className=\"col-sm-6\">\n                        <label htmlFor=\"email\">Email:</label>\n                        <Field\n                          value={dataUser.email}\n                          disabled\n                          id=\"email\"\n                          name=\"email\"\n                          type=\"email\"\n                          className=\"form-control my-2\"\n                        />\n                        <ErrorMessage\n                          name=\"email\"\n                          component=\"div\"\n                          className=\"text-danger\"\n                        />\n                        <div className=\"form-group\">\n                          <label htmlFor=\"address\">Address: </label>\n                          <Field\n                            id=\"address\"\n                            name=\"address\"\n                            className=\"form-control my-2\"\n                          />\n                          <ErrorMessage\n                            name=\"address\"\n                            component=\"div\"\n                            className=\"text-danger\"\n                          />\n                        </div>\n                      </div>\n                      <div className=\"col-sm-6\">\n                        <div className=\"form-group\">\n                          <label htmlFor=\"city\">City: </label>\n                          <Field\n                            id=\"city\"\n                            name=\"city\"\n                            className=\"form-control my-2\"\n                          />\n                          <ErrorMessage\n                            name=\"city\"\n                            component=\"div\"\n                            className=\"text-danger\"\n                          />\n                        </div>\n\n                        <div className=\"form-group\">\n                          <label htmlFor=\"phone\">Phone:</label>\n                          <Field\n                            id=\"phone\"\n                            name=\"phone\"\n                            className=\"form-control my-2\"\n                          />\n                          <ErrorMessage\n                            name=\"phone\"\n                            component=\"div\"\n                            className=\"text-danger\"\n                          />\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"form-group\">\n                    <label htmlFor=\"avatar\">Avatar: </label>\n                    <Field\n                      id=\"avatar\"\n                      name=\"avatar\"\n                      className=\"form-control my-2\"\n                    />\n                    <ErrorMessage\n                      name=\"avatar\"\n                      component=\"div\"\n                      className=\"text-danger\"\n                    />\n                    <img\n                      style={{ width: \"14rem\", padding: \"1rem\" }}\n                      src={props.values.avatar}\n                      alt=\"\"\n                    />\n                  </div>\n                  <button className=\"btn btn-dark w-100 mt-2\" type=\"submit\">\n                    Submit\n                  </button>\n                </Form>\n              )}\n            </Formik>\n          ) : (\n            \"\"\n          )}\n        </div>\n        <UpdateMessage\n          updateMessage={updateMessage}\n          setUpdateMessage={setUpdateMessage}\n        />\n      </div>\n    </AuthenticatedGuard>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}